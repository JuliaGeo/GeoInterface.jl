<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>For developers · GeoInterface.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://juliageo.github.io/GeoInterface.jl/guides/developer/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">GeoInterface.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Background</span><ul><li><a class="tocitem" href="../../background/sf/">Simple Features</a></li><li><a class="tocitem" href="../../background/history/">History</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/installation/">Installation</a></li><li><a class="tocitem" href="../../tutorials/usage/">Usage</a></li></ul></li><li><span class="tocitem">Guides</span><ul><li class="is-active"><a class="tocitem" href>For developers</a><ul class="internal"><li><a class="tocitem" href="#Required-for-Geometry"><span>Required for Geometry</span></a></li><li><a class="tocitem" href="#Optional-for-Geometry"><span>Optional for Geometry</span></a></li><li><a class="tocitem" href="#Required-for-Rasters"><span>Required for Rasters</span></a></li><li><a class="tocitem" href="#Required-for-Feature(Collection)s"><span>Required for Feature(Collection)s</span></a></li><li><a class="tocitem" href="#Geospatial-Operations"><span>Geospatial Operations</span></a></li><li><a class="tocitem" href="#Geospatial-Relations"><span>Geospatial Relations</span></a></li><li><a class="tocitem" href="#Geospatial-Sets"><span>Geospatial Sets</span></a></li><li><a class="tocitem" href="#Testing-the-interface"><span>Testing the interface</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><a class="tocitem" href="../defaults/">Defaults</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../reference/api/">API</a></li><li><a class="tocitem" href="../../reference/integrations/">Implementations</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Guides</a></li><li class="is-active"><a href>For developers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>For developers</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGeo/GeoInterface.jl/blob/master/docs/src/guides/developer.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Implementing-GeoInterface"><a class="docs-heading-anchor" href="#Implementing-GeoInterface">Implementing GeoInterface</a><a id="Implementing-GeoInterface-1"></a><a class="docs-heading-anchor-permalink" href="#Implementing-GeoInterface" title="Permalink"></a></h1><p>GeoInterface requires six functions to be defined for a custom geometry. On top of that it could be useful to also implement some optional methods if they apply or are faster than the <a href="../defaults/#Fallbacks">Fallbacks</a>.</p><p>If your package also supports geospatial operations on geometries–such as intersections–, please also implement those interfaces where applicable.</p><p>GeoInterface also has some utility packages, <code>GeoInterfaceMakie</code> and <code>GeoInterfaceRecipes</code>,  which provide plotting support through their <code>@enable</code> macros. If you wish to implement plotting support for your geometry, please create a <a href="https://pkgdocs.julialang.org/v1/creating-packages/#Conditional-loading-of-code-in-packages-(Extensions)">package extension</a>  that extends either <code>Makie</code> (for the Makie.jl ecosystem) or <code>RecipesBase</code> (for the Plots.jl ecosystem). You can find some examples of this pattern in <a href="https://github.com/JuliaGeo/Shapefile.jl/blob/main/ext/ShapefileMakieExt.jl">Shapefile.jl</a> and <a href="https://github.com/JuliaGeo/GeoJSON.jl/blob/main/ext/GeoJSONMakieExt.jl">GeoJSON.jl</a>.</p><p>Last but not least, we also provide an interface for rasters and features–geometries with properties–if applicable.</p><h2 id="Required-for-Geometry"><a class="docs-heading-anchor" href="#Required-for-Geometry">Required for Geometry</a><a id="Required-for-Geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Required-for-Geometry" title="Permalink"></a></h2><pre><code class="language-julia hljs">GeoInterface.isgeometry(geom::customgeom)::Bool = true
GeoInterface.geomtrait(geom::customgeom)::DataType = XTrait() # &lt;: AbstractGeometryTrait
# for PointTraits
GeoInterface.ncoord(geomtrait(geom), geom::customgeom)::Integer
GeoInterface.getcoord(geomtrait(geom), geom::customgeom, i)::Real
# for non PointTraits
GeoInterface.ngeom(geomtrait(geom), geom::customgeom)::Integer
GeoInterface.getgeom(geomtrait(geom), geom::customgeom, i)</code></pre><p>Where the <code>getgeom</code> and <code>getcoord</code> could be an iterator (without the <code>i</code>) as well. It will return a new geom with the correct <code>geomtrait</code>. This means that a call to <code>getgeom</code> on a geometry that has a <code>LineStringTrait</code> should return something that implements the <code>PointTrait</code>. This hierarchy can be checked programmatically with <a href="../../reference/api/#GeoInterface.subtrait-Tuple{AbstractPointTrait}"><code>subtrait</code></a>. You read more about the <code>geomtrait</code> in the <a href="../../background/sf/#Type-hierarchy">Type hierarchy</a>.</p><p>The <code>ngeom</code> and <code>getgeom</code> are aliases for their geom specific counterparts, such as <code>npoints</code> and <code>getpoint</code> for <code>LineStringTrait</code>s.</p><h2 id="Optional-for-Geometry"><a class="docs-heading-anchor" href="#Optional-for-Geometry">Optional for Geometry</a><a id="Optional-for-Geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Optional-for-Geometry" title="Permalink"></a></h2><p>There are also optional generic methods that could help with locating this geometry.</p><pre><code class="language-julia hljs">GeoInterface.crs(trait(geom), geom::customgeom)::GeoFormatTypes.CoordinateReferenceSystem
GeoInterface.extent(trait(geom), geom::customgeom)::Extents.Extent</code></pre><p>For extents, <code>Extents.extent(geom::customgeom)</code> is the fallback method for GeoInterface.extent,  and can be used instead here for wider interoperability. If neither is defined, <code>GeoInterface.extent</code> will calculate the extent from the points of the geometry.</p><p>And lastly, there are many other optional functions for each specific geometry. GeoInterface provides fallback implementations based on the generic functions above, but these are not optimized. These are detailed in <a href="../defaults/#Fallbacks">Fallbacks</a>.</p><h3 id="Conversion"><a class="docs-heading-anchor" href="#Conversion">Conversion</a><a id="Conversion-1"></a><a class="docs-heading-anchor-permalink" href="#Conversion" title="Permalink"></a></h3><p>It is useful if others can convert any custom geometry into your geometry type, if their custom geometry supports GeoInterface as well. This requires the following methods, where the implementation should be defined in terms of GeoInterface methods like <code>ngeom</code>, <code>getgeom</code>, or just <code>coordinates</code> calls.</p><pre><code class="language-julia hljs"># This method will get called on GeoInterface.convert(::Type{T}, geom)
# if geomtrait(geom) == LineStringTrait()
GeoInterface.convert(::Type{CustomLineString}, ::LineStringTrait, geom) = ...
GeoInterface.convert(::Type{CustomPolygon}, ::PolygonTrait, geom) = ...</code></pre><h2 id="Required-for-Rasters"><a class="docs-heading-anchor" href="#Required-for-Rasters">Required for Rasters</a><a id="Required-for-Rasters-1"></a><a class="docs-heading-anchor-permalink" href="#Required-for-Rasters" title="Permalink"></a></h2><p>A Raster is something that is an AbstractArray</p><pre><code class="language-julia hljs">GeoInterface.israster(raster::customraster)::Bool = true
GeoInterface.trait(::customraster) = RasterTrait()
GeoInterface.extent(::RasterTrait, raster::customraster)::Extents.Extent
GeoInterface.crs(::RasterTrait, raster::customraster)::GeoFormatTypes.CoordinateReferenceSystem</code></pre><h2 id="Required-for-Feature(Collection)s"><a class="docs-heading-anchor" href="#Required-for-Feature(Collection)s">Required for Feature(Collection)s</a><a id="Required-for-Feature(Collection)s-1"></a><a class="docs-heading-anchor-permalink" href="#Required-for-Feature(Collection)s" title="Permalink"></a></h2><p>A Feature is a geometry with properties, and in modern parlance, a row in table. A FeatureCollection is thus a Vector of Features, often represented as a table.</p><p>A Feature implements the following:</p><pre><code class="language-julia hljs">GeoInterface.isfeature(feat::customfeat)::Bool = true
GeoInterface.properties(feat::customfeat)
GeoInterface.geometry(feat::customfeat)</code></pre><p>While a FeatureCollection implements the following:</p><pre><code class="language-julia hljs">GeoInterface.isfeaturecollection(::Type{customcollection}) = true
GeoInterface.getfeature(trait(::customcollection), ::customcollection, i)
GeoInterface.nfeature(trait(::customcollection), ::customcollection)
GeoInterface.geometrycolumns(::customcollection) = (:geometry,)  # can be multiple!</code></pre><p>The <code>geometrycolumns</code> enables other packages to know which field in a row, or column in a table, contains the geometry or geometries.</p><p>It&#39;s important to note that the <code>geometrycolumns</code> should always return a <code>Tuple</code> of <code>Symbol</code>s.  However, it does have a fallback method that uses <a href="https://github.com/JuliaData/DataAPI.jl">DataAPI.jl</a> metadata, if it exists, to retrieve the geometry columns.  This relies on the <code>&quot;GEOINTERFACE:geometrycolumns&quot;</code> metadata key.  GeoInterface.jl compatible writers may set this metadata key if writing to a format that does not have its own mechanism to store known geometry columns, like Arrow.</p><p>Optionally, the <code>crs</code> method can also be implemented:</p><pre><code class="language-julia hljs">GeoInterface.crs(::customcollection)</code></pre><p>This should return a <code>GeoFormatTypes.CoordinateReferenceSystem</code> type, such as <code>EPSG(code::Int)</code>, <code>WellKnownText(GeoFormatTypes.CRS(), wkt::String)</code>,  or <code>ProjString(p4::String)</code>.  See <a href="https://github.com/JuliaGeo/GeoFormatTypes.jl">GeoFormatTypes.jl</a> for more information.</p><p>The <code>crs</code> method also has a fallback that uses <a href="https://github.com/JuliaData/DataAPI.jl">DataAPI.jl</a> metadata, if it exists, to retrieve the CRS. GeoInterface searches for the <code>&quot;GEOINTERFACE:crs&quot;</code> metadata key to retrieve the CRS.</p><h2 id="Geospatial-Operations"><a class="docs-heading-anchor" href="#Geospatial-Operations">Geospatial Operations</a><a id="Geospatial-Operations-1"></a><a class="docs-heading-anchor-permalink" href="#Geospatial-Operations" title="Permalink"></a></h2><pre><code class="language-julia hljs">distance(geomtrait(a), geomtrait(b), a, b)
buffer(geomtrait(geom), geom, distance)
convexhull(geomtrait(geom), geom)</code></pre><h2 id="Geospatial-Relations"><a class="docs-heading-anchor" href="#Geospatial-Relations">Geospatial Relations</a><a id="Geospatial-Relations-1"></a><a class="docs-heading-anchor-permalink" href="#Geospatial-Relations" title="Permalink"></a></h2><p>These functions are used to describe the relations between geometries as defined in the Dimensionally Extended 9-Intersection Model (<a href="https://en.wikipedia.org/wiki/DE-9IM">DE-9IM</a>).</p><pre><code class="language-julia hljs">equals(geomtrait(a), geomtrait(b), a, b)
disjoint(geomtrait(a), geomtrait(b), a, b)
intersects(geomtrait(a), geomtrait(b), a, b)
touches(geomtrait(a), geomtrait(b), a, b)
within(geomtrait(a), geomtrait(b), a, b)
contains(geomtrait(a), geomtrait(b), a, b)
overlaps(geomtrait(a), geomtrait(b), a, b)
crosses(geomtrait(a), geomtrait(b), a, b)
relate(geomtrait(a), geomtrait(b), a, b, relationmatrix)</code></pre><h2 id="Geospatial-Sets"><a class="docs-heading-anchor" href="#Geospatial-Sets">Geospatial Sets</a><a id="Geospatial-Sets-1"></a><a class="docs-heading-anchor-permalink" href="#Geospatial-Sets" title="Permalink"></a></h2><pre><code class="language-julia hljs">symdifference(geomtrait(a), geomtrait(b), a, b)
difference(geomtrait(a), geomtrait(b), a, b)
intersection(geomtrait(a), geomtrait(b), a, b)
union(geomtrait(a), geomtrait(b), a, b)</code></pre><h2 id="Testing-the-interface"><a class="docs-heading-anchor" href="#Testing-the-interface">Testing the interface</a><a id="Testing-the-interface-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-the-interface" title="Permalink"></a></h2><p>GeoInterface provides a Testsuite for a geom type to check whether the required functions that have been correctly implemented and work as expected.</p><pre><code class="language-julia hljs">GeoInterface.testgeometry(geom)
GeoInterface.testfeature(geom)</code></pre><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>All custom geometries implement</p><pre><code class="language-julia hljs">GeoInterface.isgeometry(geom::customgeom)::Bool = true</code></pre><p>A <code>geom::customgeom</code> with &quot;Point&quot;-like traits implements</p><pre><code class="language-julia hljs">GeoInterface.geomtrait(geom::customgeom)::DataType = PointTrait()
GeoInterface.ncoord(::PointTrait, geom::customgeom)::Integer
GeoInterface.getcoord(::PointTrait, geom::customgeom, i)::Real

# Defaults
GeoInterface.ngeom(::PointTrait, geom)::Integer = 0
GeoInterface.getgeom(::PointTrait, geom::customgeom, i) = nothing</code></pre><p>A <code>geom::customgeom</code> with &quot;LineString&quot;-like traits implements the following methods:</p><pre><code class="language-julia hljs">GeoInterface.geomtrait(geom::customgeom)::DataType = LineStringTrait()
GeoInterface.ncoord(::LineStringTrait, geom::customgeom)::Integer

# These alias for npoint and getpoint
GeoInterface.ngeom(::LineStringTrait, geom::customgeom)::Integer
GeoInterface.getgeom(::LineStringTrait, geom::customgeom, i) # of geomtrait Point

# Optional
GeoInterface.isclosed(::LineStringTrait, geom::customgeom)::Bool
GeoInterface.issimple(::LineStringTrait, geom::customgeom)::Bool
GeoInterface.length(::LineStringTrait, geom::customgeom)::Real</code></pre><p>A <code>geom::customgeom</code> with &quot;Polygon&quot;-like traits can implement the following methods:</p><pre><code class="language-julia hljs">GeoInterface.geomtrait(geom::customgeom)::DataType = PolygonTrait()
GeoInterface.ncoord(::PolygonTrait, geom::customgeom)::Integer

# These alias for nring and getring
GeoInterface.ngeom(::PolygonTrait, geom::customgeom)::Integer
GeoInterface.getgeom(::PolygonTrait, geom::customgeom, i)::&quot;LineStringTrait&quot;

# Optional
GeoInterface.area(::PolygonTrait, geom::customgeom)::Real
GeoInterface.centroid(::PolygonTrait, geom::customgeom)::&quot;PointTrait&quot;
GeoInterface.pointonsurface(::PolygonTrait, geom::customgeom)::&quot;PointTrait&quot;
GeoInterface.boundary(::PolygonTrait, geom::customgeom)::&quot;LineStringTrait&quot;</code></pre><p>A <code>geom::customgeom</code> with &quot;GeometryCollection&quot;-like traits has to implement the following methods:</p><pre><code class="language-julia hljs">GeoInterface.geomtrait(geom::customgeom) = GeometryCollectionTrait()
GeoInterface.ncoord(::GeometryCollectionTrait, geom::customgeom)::Integer
GeoInterface.ngeom(::GeometryCollectionTrait, geom::customgeom)::Integer
GeoInterface.getgeom(::GeometryCollectionTrait,geom::customgeomm, i)::&quot;GeometryTrait&quot;</code></pre><p>A <code>geom::customgeom</code> with &quot;MultiPoint&quot;-like traits has to implement the following methods:</p><pre><code class="language-julia hljs">GeoInterface.geomtrait(geom::customgeom) = MultiPointTrait()
GeoInterface.ncoord(::MultiPointTrait, geom::customgeom)::Integer

# These alias for npoint and getpoint
GeoInterface.ngeom(::MultiPointTrait, geom::customgeom)::Integer
GeoInterface.getgeom(::MultiPointTrait, geom::customgeom, i)::&quot;PointTrait&quot;</code></pre><p>A <code>geom::customgeom</code> with &quot;MultiLineString&quot;-like traits has to implement the following methods:</p><pre><code class="language-julia hljs">GeoInterface.geomtrait(geom::customgeom) = MultiLineStringTrait()
GeoInterface.ncoord(::MultiLineStringTrait, geom::customgeom)::Integer

# These alias for nlinestring and getlinestring
GeoInterface.ngeom(::MultiLineStringTrait, geom::customgeom)::Integer
GeoInterface.getgeom(::MultiLineStringTrait,geom::customgeomm, i)::&quot;LineStringTrait&quot;</code></pre><p>A <code>geom::customgeom</code> with &quot;MultiPolygon&quot;-like traits has to implement the following methods:</p><pre><code class="language-julia hljs">GeoInterface.geomtrait(geom::customgeom) = MultiPolygonTrait()
GeoInterface.ncoord(::MultiPolygonTrait, geom::customgeom)::Integer

# These alias for npolygon and getpolygon
GeoInterface.ngeom(::MultiPolygonTrait, geom::customgeom)::Integer
GeoInterface.getgeom(::MultiPolygonTrait, geom::customgeom, i)::&quot;PolygonTrait&quot;</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../tutorials/usage/">« Usage</a><a class="docs-footer-nextpage" href="../defaults/">Defaults »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Monday 6 January 2025 22:59">Monday 6 January 2025</span>. Using Julia version 1.10.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
